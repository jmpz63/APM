<?xml version="1.0"?>
<robot name="moveo" xmlns:xacro="http://ros.org/wiki/xacro">
  <!-- 5-DOF Moveo arm. Dual-motor joint2 handled in hardware. Joint6 unused (aux-wires). -->

  <!-- Base link (assumed fixed) -->
  <link name="base_link">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.01" ixy="0" ixz="0" iyy="0.01" iyz="0" izz="0.01"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.08 0.08 0.02"/></geometry>
      <material name="grey"><color rgba="0.5 0.5 0.5 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <geometry><box size="0.08 0.08 0.02"/></geometry>
    </collision>
  </link>

  <!-- Link1 -->
  <link name="link1">
    <inertial>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <mass value="0.18"/>
      <inertia ixx="0.00025" ixy="0" ixz="0" iyy="0.00022" iyz="0" izz="0.00030"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry><cylinder radius="0.025" length="0.05"/></geometry>
      <material name="blue"><color rgba="0.2 0.4 0.8 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <!-- Slightly shorter collision length (0.048 vs 0.05) to create a 1mm clearance to adjacent link and prevent constant contact reports. -->
      <geometry><cylinder radius="0.025" length="0.048"/></geometry>
    </collision>
  </link>
  <joint name="joint1" type="revolute">
    <parent link="base_link"/>
    <child link="link1"/>
    <origin xyz="0 0 0.025" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <!-- Calibrated: ±82° (±1.4312 rad) | gear_ratio: 100:10 | endstop: 82° -->
    <limit effort="5" velocity="8.7266" lower="-1.4312" upper="1.4312"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>

  <!-- Link2 -->
  <link name="link2">
    <inertial>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <mass value="0.20"/>
      <inertia ixx="0.00030" ixy="0" ixz="0" iyy="0.00028" iyz="0" izz="0.00035"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry><box size="0.04 0.04 0.05"/></geometry>
      <material name="green"><color rgba="0.2 0.8 0.4 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <!-- Shrink collision length to 0.048 for clearance -->
      <geometry><box size="0.04 0.04 0.048"/></geometry>
    </collision>
  </link>
  <joint name="joint2" type="revolute">
    <parent link="link1"/>
    <child link="link2"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <!-- Calibrated: -110° to +120° (-1.9199 to 2.0944 rad) | gear_ratio: 77:14 | endstop: 115.3° | DUAL MOTOR -->
    <limit effort="5" velocity="8.7266" lower="-1.9199" upper="2.0944"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>

  <!-- Link3 -->
  <link name="link3">
    <inertial>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <mass value="0.16"/>
      <inertia ixx="0.00020" ixy="0" ixz="0" iyy="0.00018" iyz="0" izz="0.00025"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <geometry><box size="0.035 0.035 0.05"/></geometry>
      <material name="orange"><color rgba="0.9 0.5 0.2 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.025" rpy="0 0 0"/>
      <!-- Clearance adjusted -->
      <geometry><box size="0.035 0.035 0.048"/></geometry>
    </collision>
  </link>
  <joint name="joint3" type="revolute">
    <parent link="link2"/>
    <child link="link3"/>
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <axis xyz="0 1 0"/>
    <!-- Calibrated: -90° to +115° (-1.5708 to 2.0071 rad) | gear_ratio: 600:7 | endstop: 115° -->
    <limit effort="5" velocity="8.7266" lower="-1.5708" upper="2.0071"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>

  <!-- Link4 -->
  <link name="link4">
    <inertial>
      <origin xyz="0 0 0.02" rpy="0 0 0"/>
      <mass value="0.12"/>
      <inertia ixx="0.00012" ixy="0" ixz="0" iyy="0.00010" iyz="0" izz="0.00015"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.02" rpy="0 0 0"/>
      <geometry><box size="0.03 0.03 0.04"/></geometry>
      <material name="purple"><color rgba="0.6 0.3 0.7 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.02" rpy="0 0 0"/>
      <!-- Clearance adjusted -->
      <geometry><box size="0.03 0.03 0.038"/></geometry>
    </collision>
  </link>
  <joint name="joint4" type="revolute">
    <parent link="link3"/>
    <child link="link4"/>
    <!-- Raised joint4 origin from 0.04 -> 0.05 to remove overlap between link3 (0–0.05 span) and link4 (0–0.04 span relative to its own frame). -->
    <origin xyz="0 0 0.05" rpy="0 0 0"/>
    <axis xyz="1 0 0"/>
    <!-- Calibrated: ±180° (±3.1416 rad) | gear_ratio: 5.16:1 -->
    <limit effort="5" velocity="8.7266" lower="-3.1416" upper="3.1416"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>

  <!-- Link5 -->
  <link name="link5">
    <inertial>
      <origin xyz="0 0 0.015" rpy="0 0 0"/>
      <mass value="0.10"/>
      <inertia ixx="0.00009" ixy="0" ixz="0" iyy="0.00008" iyz="0" izz="0.00011"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.015" rpy="0 0 0"/>
      <geometry><box size="0.025 0.025 0.03"/></geometry>
      <material name="red"><color rgba="0.85 0.2 0.2 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.015" rpy="0 0 0"/>
      <!-- Clearance adjusted -->
      <geometry><box size="0.025 0.025 0.028"/></geometry>
    </collision>
  </link>
  <joint name="joint5" type="revolute">
    <parent link="link4"/>
    <child link="link5"/>
    <!-- Raised joint5 origin from 0.03 -> 0.04 to create ~2mm clearance between link4 top (≈0.039) and link5 bottom (≈0.041). -->
    <origin xyz="0 0 0.04" rpy="0 0 0"/>
    <axis xyz="0 0 1"/>
    <!-- Calibrated: -90° to +85° (-1.5708 to 1.4835 rad) | gear_ratio: 45:2 | endstop: 85° -->
    <limit effort="5" velocity="8.7266" lower="-1.5708" upper="1.4835"/>
    <dynamics damping="0.1" friction="0.0"/>
  </joint>

  <!-- End effector link (5-DOF configuration, joint6 removed/aux-wires) -->
  <link name="end_effector">
    <inertial>
      <origin xyz="0 0 0.01" rpy="0 0 0"/>
      <mass value="0.05"/>
      <inertia ixx="0.00003" ixy="0" ixz="0" iyy="0.00003" iyz="0" izz="0.00004"/>
    </inertial>
    <visual>
      <origin xyz="0 0 0.01" rpy="0 0 0"/>
      <geometry><cylinder radius="0.01" length="0.02"/></geometry>
      <material name="yellow"><color rgba="0.95 0.85 0.2 1"/></material>
    </visual>
    <collision>
      <origin xyz="0 0 0.01" rpy="0 0 0"/>
      <geometry><cylinder radius="0.01" length="0.018"/></geometry>
    </collision>
  </link>
  <joint name="end_effector_joint" type="fixed">
    <parent link="link5"/>
    <child link="end_effector"/>
    <origin xyz="0 0 0.03" rpy="0 0 0"/>
  </joint>

</robot>
